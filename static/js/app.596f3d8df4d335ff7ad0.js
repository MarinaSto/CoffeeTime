webpackJsonp([1],{"6+Sd":function(e,t){},"6/F0":function(e,t){},FHub:function(e,t){},JuBL:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("7+uW"),n=r("kxiW"),i=r.n(n),a={name:"navbar",data:function(){return{isLoggedIn:!1,currentUser:!1}},created:function(){i.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=i.a.auth().currentUser.email)},methods:{logout:function(){var e=this;i.a.auth().signOut().then(function(){alert("You are logged out"),e.$router.go({path:e.$router.path})},function(e){var t=e.code,r=e.message;alert("Error code: "+t+"\nMessage: "+r)})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar-dark bg-dark"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row d-flex  justify-content-between"},[r("div",{staticClass:"col-3"},[r("router-link",{attrs:{to:"/"}},[e._v("Coffe Time")])],1),e._v(" "),r("div",{staticClass:"col-9 rights d-flex justify-content-end"},[r("ul",[e.isLoggedIn?r("li",[r("span",[e._v(e._s(e.currentUser))])]):e._e(),e._v(" "),e.isLoggedIn?r("li",{attrs:{id:"nav_home"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")])],1):e._e(),e._v(" "),e.isLoggedIn?r("li",{attrs:{id:"nav_home"}},[r("router-link",{attrs:{to:"/status"}},[e._v("Status")])],1):e._e(),e._v(" "),e.isLoggedIn?r("li",[r("router-link",{attrs:{to:"/new"}},[e._v("Manage")])],1):e._e(),e._v(" "),e.isLoggedIn?r("li",[r("router-link",{attrs:{to:"/operations"}},[e._v("Logs")])],1):e._e(),e._v(" "),e.isLoggedIn?e._e():r("li",[r("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),e._v(" "),e.isLoggedIn?e._e():r("li",[r("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1),e._v(" "),e.isLoggedIn?r("li",[r("button",{on:{click:e.logout}},[e._v("Logout")])]):e._e()])])])])])},staticRenderFns:[]};var l={name:"App",components:{Navbar:r("VU/8")(a,o,!1,function(e){r("w+Bd")},null,null).exports}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Navbar"),this._v(" "),t("div",[t("router-view")],1)],1)},staticRenderFns:[]},u=r("VU/8")(l,c,!1,null,null,null).exports,d=r("/ocq"),f=(r("881v"),i.a.initializeApp({apiKey:"AIzaSyDHELQXDnU8DRFSYP2Xcibaf639ZUxj7m4",authDomain:"timeforacoffee-2019.firebaseapp.com",databaseURL:"https://timeforacoffee-2019.firebaseio.com",projectId:"timeforacoffee-2019",storageBucket:"timeforacoffee-2019.appspot.com",messagingSenderId:"376478292639",appId:"1:376478292639:web:671249ec07881a7ffa20aa",measurementId:"G-LXEXWJZBC9"}).firestore()),v={name:"home",data:function(){return{users:[],editUser:{Trinker:[],Bezahler:""}}},firestore:function(){return{users:f.collection("Users")}},methods:{findUserByKey:function(e){for(var t=0;t<this.users.length;t++)if(console.log(t),this.users[t].id==e)return this.users[t];return!1},differenz:function(e){return e.Bezahlt-e.Getrunken},updateUser:function(){console.log("updateuse yess"),this.updateUserCore()?(console.log("ceck aktive yess"),this.checkActive()):alert("Failed to add the operation check if the bezalher and trinkers are correctly setted"),this.editUser.Trinker=[],this.editUser.Bezahler=[]},checkActive:function(){for(var e=0;e<this.users.length;e++)this.users[e].Active||0!=this.differenz(this.users[e])?console.log("Impossible to remove the user. Active:"+this.users[e].Active+" diff: "+(this.users[e].Bezahlt-this.users[e].Getrunken)):f.collection("Users").doc(this.users[e].id).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e)})},updateUserCore:function(){var e=this.editUser.Trinker,t=this.editUser.Bezahler;if(console.log("HERE"+t),void 0==e||""==e)return console.log("Adding new operation failed while trinkers is undefined"),!1;if(void 0==t||""==t)return console.log("Adding new operation failed while bezahler is undefined"),!1;if(0==e.lenght)return console.log("Adding new operation failed while no trinkers in the list"),!1;var r=this.findUserByKey(t);if(0==r)return console.log("Bezahler key not founded in user list operation failed"),!1;r.Bezahlt=r.Bezahlt+e.length,f.collection("Users").doc(t).update({Bezahlt:r.Bezahlt}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error updating document: ",e)});for(var s=[],n=0;n<e.length;n++){var i=this.findUserByKey(e[n]);0!=i?(s.push({Name:i.Name,id:i.id}),f.collection("Users").doc(e[n]).update({Getrunken:i.Getrunken+1}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error updating document: ",e)})):console.log("Trinker "+e[n]+" not found in user list.")}var a={Bezahlt:{Name:r.Name,id:r.id},Datum:(new Date).toLocaleString(),Trinkers:s};return f.collection("Operations").add(a),!0}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper",attrs:{id:"home"}},[r("div",{staticClass:"container d-flex justify-content-center align-item-center"},[r("div",{staticClass:"wrapper-login d-flex align-self-center flex-column justify-content-around mt-4"},[r("h3",{staticClass:"d-flex justify-content-center"},[e._v("Add Operation")]),e._v(" "),r("form",{staticClass:"form-operation",on:{submit:function(t){return t.preventDefault(),e.updateUser()}}},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.editUser.Bezahler,expression:"editUser.Bezahler"}],staticClass:"btn btn-outline-secondary my-3",attrs:{placeholder:"Select"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.editUser,"Bezahler",t.target.multiple?r:r[0])}}},e._l(e.users,function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.Name))])}),0),e._v(" "),r("hr",{}),e._v(" "),e._l(e.users,function(t){return r("div",{key:t.id},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.editUser.Trinker,expression:"editUser.Trinker"}],staticClass:"mr-4",attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.editUser.Trinker)?e._i(e.editUser.Trinker,t.id)>-1:e.editUser.Trinker},on:{change:function(r){var s=e.editUser.Trinker,n=r.target,i=!!n.checked;if(Array.isArray(s)){var a=t.id,o=e._i(s,a);n.checked?o<0&&e.$set(e.editUser,"Trinker",s.concat([a])):o>-1&&e.$set(e.editUser,"Trinker",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.editUser,"Trinker",i)}}}),e._v(" "),r("label",[e._v(" "+e._s(t.Name)+" ")])])}),e._v(" "),r("br"),e._v(" "),r("input",{staticClass:"btn btn-lg btn-info btn-block text-uppercase",attrs:{type:"submit",value:"Confirm"}})],2)])])])},staticRenderFns:[]};var m=r("VU/8")(v,h,!1,function(e){r("6/F0")},"data-v-43c25344",null).exports,p={name:"new-user",data:function(){return{users:[],Firma_id:"",Name:"",Active:!0,id:0,Bezahlt:0,Getrunken:0}},firestore:function(){return{users:f.collection("Users")}},methods:{disableUser:function(e){var t=e.id,r=f.collection("Users").doc(t);return console.log("disable user called on: "+e.id),r.update({Active:!1}).then(function(){console.log("remuse user: "+e.id);var t=f.collection("Users").doc(e.id);console.log("USER "+e.Name+" ACTIVE "+e.Active+" Bezeled "+e.Bezahlt+" Bevuti "+e.Getrunken),e.Bezahlt-e.Getrunken==0?t.delete().then(function(){console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e)}):console.log("Impossible to remove the user. Active:"+e.Active+" diff: "+(e.Bezahlt-e.Getrunken))}).catch(function(e){console.error("Error updating document: ",e)})},enableUser:function(e){return f.collection("Users").doc(e.id).update({Active:!0}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error updating document: ",e)})},addUser:function(){f.collection("Users").add({Name:this.Name,Active:this.Active,Firma_id:this.Firma_id,id:this.id,Bezahlt:this.Bezahlt,Getrunken:this.Getrunken}).catch(function(e){return console.log(err)})}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container",attrs:{id:"new-user"}},[r("div",{staticClass:"row"},[r("table",{staticClass:"table table-striped mx-auto table-hover mt-4"},[e._m(0),e._v(" "),r("tbody",e._l(e.users,function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.Firma_id))]),e._v(" "),r("td",[e._v(e._s(t.Name))]),e._v(" "),t.Active?r("td",[r("i",{staticClass:"fas fa-check-square",on:{click:function(r){return e.disableUser(t)}}})]):r("td",{on:{click:function(r){return e.enableUser(t)}}},[r("i",{staticClass:"fas fa-exclamation-circle"})])])}),0)]),e._v(" "),r("form",{staticClass:"form-inline mx-auto",on:{submit:function(t){return t.preventDefault(),e.addUser(t)}}},[r("label",{staticClass:"font-weight-light m-1",attrs:{for:"name"}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.Firma_id,expression:"Firma_id"}],staticClass:"form-control m-1",attrs:{type:"text",id:"firma_id ",placeholder:"Insert id",required:""},domProps:{value:e.Firma_id},on:{input:function(t){t.target.composing||(e.Firma_id=t.target.value)}}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.Name,expression:"Name"}],staticClass:"form-control m-1",attrs:{type:"text",id:"name",placeholder:"Insert new Name",required:""},domProps:{value:e.Name},on:{input:function(t){t.target.composing||(e.Name=t.target.value)}}}),e._v(" "),r("input",{staticClass:"btn btn-info m-1",attrs:{type:"submit",value:"add"}})])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",{staticClass:"mt-4"},[t("tr",{attrs:{id:"first-table"}},[t("th",{attrs:{scope:"col"}},[this._v("ID")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Active")])])])}]};var _=r("VU/8")(p,g,!1,function(e){r("6+Sd")},"data-v-15e803b0",null).exports,b={name:"operations",data:function(){return{operations:[]}},firestore:function(){return{operations:f.collection("Operations")}}},k={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container",attrs:{id:"operations"}},[r("div",{staticClass:"row"},[r("table",{staticClass:"table table-striped mx-auto table-bordered table-hover mt-4"},[e._m(0),e._v(" "),r("tbody",e._l(e.operations.slice().reverse(),function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.Datum))]),e._v(" "),r("td",[e._v(e._s(t.Bezahlt.Name))]),e._v(" "),r("td",e._l(t.Trinkers,function(t){return r("span",{key:t.id,staticClass:"text-muted",staticStyle:{padding:"1px 8px"}},[e._v(e._s(t.Name))])}),0)])}),0)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",{attrs:{id:"third-table"}},[t("th",{attrs:{scope:"col"}},[this._v("Datum")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Trinker")])])])}]};var w=r("VU/8")(b,k,!1,function(e){r("iwfm")},"data-v-2387cc4d",null).exports,U={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(e){var t=this;console.log("register username "+this.email),console.log("register pwd "+this.password),i.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){alert("You are logged in as "+e.user.email),t.$router.go({path:t.$router.path})},function(e){var t=e.code,r=e.message;alert("Error code: "+t+"\nMessage: "+r)}),e.preventDefault()}}},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container d-flex justify-content-center align-item-center"},[r("div",{staticClass:"wrapper-login d-flex align-self-center flex-column justify-content-around"},[r("h3",{staticClass:"d-flex justify-content-center"},[e._v("Log in")]),e._v(" "),r("form",{staticClass:"form-login"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",id:"email",placeholder:"Email address",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:"",autofocus:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-info btn-block text-uppercase",on:{click:e.login}},[e._v("Login")])]),e._v(" "),r("div",{staticClass:"separator"},[e._v(" OR ")]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-warning btn-block text-uppercase"},[r("router-link",{attrs:{to:"/register"}},[e._v("Sing Up")])],1)])])])},staticRenderFns:[]};var C=r("VU/8")(U,y,!1,function(e){r("JuBL")},"data-v-00eb4584",null).exports,x={name:"register",data:function(){return{email:"",password:""}},methods:{register:function(e){var t=this;console.log("register username "+this.email),console.log("register pwd "+this.password),i.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(e){alert("Account created as "+e.user.email),t.$router.go({path:t.$router.path})},function(e){var t=e.code,r=e.message;alert("Error code: "+t+"\nMessage: "+r)}),e.preventDefault()}}},B={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container d-flex justify-content-center align-item-center"},[r("div",{staticClass:"wrapper-login d-flex align-self-center flex-column justify-content-around"},[r("h3",{staticClass:"d-flex justify-content-center"},[e._v("Sign Up")]),e._v(" "),r("form",{staticClass:"form-login"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",id:"email",placeholder:"Email address",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:"",autofocus:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-warning btn-block text-uppercase",on:{click:e.register}},[e._v("Sign Up")])]),e._v(" "),r("div",{staticClass:"separator"},[e._v(" OR ")]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-info btn-block text-uppercase"},[r("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1)])])])},staticRenderFns:[]};var z=r("VU/8")(x,B,!1,function(e){r("FHub")},"data-v-f21fed42",null).exports,A={name:"status",data:function(){return{users:[],editUser:{Trinker:[],Bezahler:""}}},firestore:function(){return{users:f.collection("Users")}},methods:{findUserByKey:function(e){for(var t=0;t<this.users.length;t++)if(console.log(t),this.users[t].id==e)return this.users[t];return!1},differenz:function(e){return e.Bezahlt-e.Getrunken},updateUser:function(){console.log("updateuse yess"),this.updateUserCore()?(console.log("ceck aktive yess"),this.checkActive()):alert("Failed to add the operation check if the bezalher and trinkers are correctly setted"),this.editUser.Trinker=[],this.editUser.Bezahler=[]},checkActive:function(){for(var e=0;e<this.users.length;e++)this.users[e].Active||0!=this.differenz(this.users[e])?console.log("Impossible to remove the user. Active:"+this.users[e].Active+" diff: "+(this.users[e].Bezahlt-this.users[e].Getrunken)):f.collection("Users").doc(this.users[e].id).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e)})},updateUserCore:function(){var e=this.editUser.Trinker,t=this.editUser.Bezahler;if(console.log("HERE"+t),void 0==e||""==e)return console.log("Adding new operation failed while trinkers is undefined"),!1;if(void 0==t||""==t)return console.log("Adding new operation failed while bezahler is undefined"),!1;if(0==e.lenght)return console.log("Adding new operation failed while no trinkers in the list"),!1;var r=this.findUserByKey(t);if(0==r)return console.log("Bezahler key not founded in user list operation failed"),!1;r.Bezahlt=r.Bezahlt+e.length,f.collection("Users").doc(t).update({Bezahlt:r.Bezahlt}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error updating document: ",e)});for(var s=[],n=0;n<e.length;n++){var i=this.findUserByKey(e[n]);0!=i?(s.push({Name:i.Name,id:i.id}),f.collection("Users").doc(e[n]).update({Getrunken:i.Getrunken+1}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error updating document: ",e)})):console.log("Trinker "+e[n]+" not found in user list.")}var a={Bezahlt:{Name:r.Name,id:r.id},Datum:(new Date).toLocaleString(),Trinkers:s};return f.collection("Operations").add(a),!0}}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container",attrs:{id:"status"}},[r("div",{staticClass:"row "},[r("div",{staticClass:"col"},[r("table",{staticClass:"table table-striped mx-auto table-hover mt-4"},[e._m(0),e._v(" "),r("tbody",e._l(e.users,function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.Firma_id))]),e._v(" "),r("td",[e._v(e._s(t.Name))]),e._v(" "),r("td",[e._v(e._s(t.Bezahlt))]),e._v(" "),r("td",[e._v(e._s(t.Getrunken))]),e._v(" "),r("td",[e._v(e._s(e.differenz(t)))])])}),0)])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",{attrs:{id:"second-table"}},[r("th",{attrs:{scope:"col"}},[e._v("ID")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Name")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Bezahlt")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Getrunken")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Differenz")])])])}]};var E=r("VU/8")(A,N,!1,function(e){r("k9FL")},"data-v-abe3ee74",null).exports;s.a.use(d.a);var F=new d.a({routes:[{path:"/",name:"home",component:m,meta:{requresAuth:!0}},{path:"/login",name:"login",component:C,meta:{requresGuest:!0}},{path:"/register",name:"register",component:z,meta:{requresGuest:!0}},{path:"/new",name:"new-user",component:_,meta:{requresAuth:!0}},{path:"/status",name:"status",component:E,meta:{requresAuth:!0}},{path:"/operations",name:"operations",component:w,meta:{requresAuth:!0}}]});F.beforeEach(function(e,t,r){e.matched.some(function(e){return e.meta.requresAuth})?i.a.auth().currentUser?r():r({path:"/login",query:{redirect:e.fullPath}}):e.matched.some(function(e){return e.meta.requresGuest})&&(i.a.auth().currentUser?r({path:"/",query:{redirect:e.fullPath}}):r())});var D=F,L=r("hnaQ");s.a.use(L.a),s.a.config.productionTip=!1;var I=void 0;i.a.auth().onAuthStateChanged(function(e){I||(I=new s.a({el:"#app",router:D,components:{App:u},template:"<App/>"}))})},iwfm:function(e,t){},k9FL:function(e,t){},"w+Bd":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.596f3d8df4d335ff7ad0.js.map